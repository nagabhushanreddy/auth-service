# Auth Service Application Configuration
# Environment variables can be referenced using ${VAR_NAME} or ${VAR_NAME:default}

service:
  name: ${APP_NAME:auth-service}
  version: ${APP_VERSION:1.0.0}
  environment: ${ENVIRONMENT:development}
  debug: ${DEBUG:false}

server:
  host: ${HOST:0.0.0.0}
  port: ${PORT:3001}

external_services:
  authz_service:
    url: ${AUTHZ_SERVICE_URL:http://localhost:3002}
    timeout: ${AUTHZ_SERVICE_TIMEOUT:5}
  entity_service:
    url: ${ENTITY_SERVICE_URL:http://localhost:3002}
    timeout: ${ENTITY_SERVICE_TIMEOUT:5}
  frontend:
    url: ${FRONTEND_URL:http://localhost:3000}
    timeout: ${FRONTEND_TIMEOUT:5}

database:
  engine: ${DB_ENGINE:sqlite}
  url: ${DATABASE_URL:sqlite+aiosqlite:///./auth.db}
  echo: ${DB_ECHO:false}
  pool_size: ${DB_POOL_SIZE:10}
  max_overflow: ${DB_MAX_OVERFLOW:20}

redis:
  enabled: ${REDIS_ENABLED:true}
  host: ${REDIS_HOST:localhost}
  port: ${REDIS_PORT:6379}
  db: ${REDIS_DB:0}
  password: ${REDIS_PASSWORD:}
  ttl: ${REDIS_TTL:3600}

jwt:
  access_secret: ${JWT_ACCESS_SECRET:your-super-secret-access-key-min-32-chars}
  refresh_secret: ${JWT_REFRESH_SECRET:your-super-secret-refresh-key-min-32-chars}
  access_expiry: ${JWT_ACCESS_EXPIRY:900}  # 15 minutes in seconds
  refresh_expiry: ${JWT_REFRESH_EXPIRY:604800}  # 7 days in seconds
  algorithm: ${JWT_ALGORITHM:HS256}

api_key:
  secret: ${API_KEY_SECRET:your-api-key-secret}

rate_limiting:
  enabled: ${RATE_LIMITING_ENABLED:true}
  window_ms: ${RATE_LIMIT_WINDOW_MS:900000}  # 15 minutes
  max_requests: ${RATE_LIMIT_MAX_REQUESTS:100}
  brute_force_max_attempts: ${BRUTE_FORCE_MAX_ATTEMPTS:5}
  brute_force_lock_time: ${BRUTE_FORCE_LOCK_TIME:900000}  # 15 minutes

correlation_id:
  enabled: ${CORRELATION_ID_ENABLED:true}
  header_name: ${CORRELATION_ID_HEADER:x-correlation-id}

cors:
  origins:
    - ${CORS_ORIGIN_1:http://localhost:3000}
    - ${CORS_ORIGIN_2:http://localhost:3001}
  allow_credentials: ${CORS_ALLOW_CREDENTIALS:true}

oauth:
  google:
    client_id: ${GOOGLE_CLIENT_ID:}
    client_secret: ${GOOGLE_CLIENT_SECRET:}
    redirect_uri: ${GOOGLE_REDIRECT_URI:}
  facebook:
    client_id: ${FACEBOOK_CLIENT_ID:}
    client_secret: ${FACEBOOK_CLIENT_SECRET:}
    redirect_uri: ${FACEBOOK_REDIRECT_URI:}
  microsoft:
    client_id: ${MICROSOFT_CLIENT_ID:}
    client_secret: ${MICROSOFT_CLIENT_SECRET:}
    redirect_uri: ${MICROSOFT_REDIRECT_URI:}

mfa:
  otp_length: ${MFA_OTP_LENGTH:6}
  otp_expiry: ${MFA_OTP_EXPIRY:300}  # 5 minutes in seconds
  otp_attempts: ${MFA_OTP_ATTEMPTS:3}

api_docs:
  enabled: ${API_DOCS_ENABLED:true}
  title: ${API_TITLE:Auth Service API}
  version: ${API_VERSION:1.0.0}
  description: ${API_DESCRIPTION:Authentication service API}
